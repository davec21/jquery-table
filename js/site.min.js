/*!
 * Start Bootstrap - Agency v3.3.7+1 (http://startbootstrap.com/template-overviews/agency)
 * Copyright 2013-2017 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
function init(){$.ajax({type:"get",url:"https://api.myjson.com/bins/o10zv",dataType:"json",success:function(a){console.log("Data fetched successfully. Begin parse.",a),buildTable(a),buildModal(a)}})}function buildTable(a){var t=$("#edit-table > tbody");jsonData=a;var n="<tr>";a.columns.forEach(function(a){n+="<th>"+a.name+"</th>"}),n+="</tr>",t.html(n);for(var e=0;e<a.data.length;e++)addRowToTable(e)}function buildModal(a){}function addRowToTable(a){for(var t=$("#edit-table > tbody"),n='<tr id="row-'+a+'">',e=(jsonData.data[a],0);e<jsonData.columns.length;e++)n+="<td>"+createTableCell(e,a)+"</td>";n+="<td>",n+='<button class="btn btn-small btn-primary" onclick="editRow('+a+')">Edit</button> ',n+='<button class="btn btn-small btn-danger" onclick="deleteRow('+a+')">Delete</button> ',n+="</td></tr>",t.append(n)}function createTableCell(a,t){var n=jsonData.columns[a],e=jsonData.data[t],o=e[a];o||(o="");var l='<input id="data-'+t+"-"+a+'" onkeydown=keyDown(event) onblur=endEdit(this) type="';switch(n.datatype){case"string":l+='text" value="'+o+'"';break;case"json":""!==o&&(o=JSON.stringify(o).replace(/"/g,"'")),l+='text" value="'+o+'"';break;case"number":l+='number" value="'+o+'"';break;case"date":l+='date" value="'+o+'"'}return l+='" data-old="'+o+'"></input>'}function keyDown(a){"Escape"===a.key&&cancelEdit(a.target)}function addNewRow(){var a=jsonData.data.push(new Array(jsonData.columns.length));addRowToTable(a-1)}function deleteRow(a){var t=$("#row-"+a);console.log(t),t.remove(),delete jsonData.data[a]}function editRow(a){$("#myModal").modal("show")}function endRowEdit(){}function cancelRowEdit(){}function endEdit(a){var t=$(a),n=t.attr("id").split("-"),e=jsonData.columns[+n[2]],o=jsonData.data[+n[1]],l=t.data("old"),d=t.val();return l===d||validateInput(d,o,e)?(t.css("border",""),o[+n[2]]=d,void t.attr("data-old",d)):(t.css("border","2px solid red"),void t.focus())}function cancelEdit(a){var t=$(a);t.val(t.data("old")),tableEle=$("#edit-table > tbody").focus()}function validateInput(newValue,row,column){return column.validationFunc?(eval("var validate = "+column.validationFunc),validate(newValue)):"json"!==column.datatype||validateJsonInput(newValue.replace(/'/g,'"'))}function validateJsonInput(a){if(!a)return!1;try{JSON.parse(a);return!0}catch(t){return console.log(t),!1}}var jsonData;